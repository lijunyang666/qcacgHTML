<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>轻创文学网-目录页</title>
		<link rel="stylesheet" href="../css/main.css" />
		<link rel="stylesheet" href="../css/catalog.css" />
    	<link rel="stylesheet" href="../css/headerOrFooter.css" />
		<link rel="stylesheet" href="../css/LOgin.css" />
		<link rel="stylesheet" href="../css/jquery-ui.min.css" />
	</head>
	<script type="text/javascript" src="../js/vue.js"></script>
	<body id="mask" id="app"
	  v-show="bodyFlag" style="display: none;"
			v-bind:style="popup === true? 'overflow:hidden':''">

	  <myheader></myheader>
		<div id="search"></div>
		<div class="index" >
			<div class="index_Line"></div>
			<img v-for="obj in bookCustom" id="{{obj.bookCoverImage}}"  class="picture" src="../img/z-imgBj.jpg" @load="szxj.loadImg(obj.bookCoverImage ? path.rootPath + obj.bookCoverImage: '', $event)" />
			<div class="text">
			
				<h4>{{ title }}</h4>
				<ul class="text_ul">
					<li>字数: <span style="color:#7e7e7e">&nbsp &nbsp{{words}}</span></li>
					<li>点击: <span style="color:#7e7e7e">&nbsp &nbsp{{cursor}}</span></li>
					<li style="width: 200px">更新: <span style="color:#7e7e7e;">&nbsp &nbsp{{szxj.getLocalTime(update / 1000) }}</span></li>
				</ul>
				<div class="text_brief">
						<p class="text_brief_p" title="{{introduction}}">简介：
							<span style="font-size: 12px; display: inline-block;">{{introduction}}</p>
						</span>
					<div class="text_type" >
						<ul>
							<li>分类：</li>
							<li v-for="obj in Booktype"><span class="text_span">{{ obj.bookTypeName}}</span></li>
						</ul>
					</div>
					<div class="text_reading">
						<ul>
							<li><a class="text_Read" href="javascript:;">开始阅读</a></li>
							<li @click="setCollect()" v-if="!collect" ><span><img src="../img/sss4.png"/ class="text_Collection"><p>收藏作品</p><num>{{Collection}}</num></li>
							<li @click="setCollect()" v-else ><span><img src="../img/sss4.png"/ class="text_Collection"><p>已收藏</p><num>{{Collection}}</num></li>
							<li <!--v-on:click="rewardFn"--><span><img src="../img/sss3.png"/ class="text_card"><p>好人卡</p><num>{{bookCopperCoins}}</num></li>
						</ul>
					</div>
				</div>
			</div>
				<div class="text_Catalog">
				  <div v-for="obj in BookList">
  					<ul >
  						<li class="text_mark"></li>
  						<li ><b>{{ obj.volumeName }}</b></li>
  					</ul>   
  					<div class="text_chapter" >
  							<div class="group" v-for="value in obj.contentEntityList">
  							  <span class="text_sign">
  							    <a :href="path.TemprootPath + '/view/read_book.html?contentId=' + value.contentId + '&bookId='+ obj.bookId">
  							      {{ value.contentTitle }}
  							    </a>
  							  </span>
  							</div>
  							
  					</div>
					</div>
				</div>
				
				
				
				<div class="text_comment">
						<ul>
							<li><span>1982</span></li>
							<li>评论</li>
						</ul>
					</div>
				<div class="text_input">
					<ul>
						<li class="user_head"><a href="javascript:;"><img src="../img/sss8.jpg"/></a></li>
						<li ><textarea></textarea></li>
						<li class="MessageBtn"><span>发表评论</span></li>
					</ul>
					
					
					<div class="text_sort active">
						<ul>
							<li class="active">默认排序</li>
							<li>按回复数</li>
							
						</ul>
					</div>
				</div>
				<div class="CommentArea">
				 <div class="text_user clear">
						<a href="javascript:;"><img src="../img/sss8.jpg"/ ></a>
						<ul class="mes_head">
							<li class="mes_head_user" >
								<a href="javascript:;" class="user_a" title="">纷纷扰扰扰红尘</a>
								<a href="javascript:;" class="user_Top">置顶</a></li>
							<li><span class="user_comment" title="">许为知己犹按剑，纵使负心敌难为，敢于世上开冷眼，不为人间浪皱眉。</span></li>	
							<li>
							  <ul class="updata_mes">
							      <li class="mess1">1楼</li>
							      <li class="mess1">2016-12-12</li>
							      <li class="mess1">18：00</li>
							      <li class="mess2">回复</li>
							      <li class="mess3">举报</li>
							  </ul>
							</li>
						</ul>
				  </div >
				  <div class="text_userTow clear">
				      <a href="javascript:;"><img src="../img/smallHead.png"/ ></a>
              <ul class="mes_head">
                <li class="mes_head_user" >
                  <a href="javascript:;" class="user_a" title="">浩浩荡荡荡乾坤</a>
                <li><span class="user_comment"  title="">半涉浊流半席清，倚筝闲吟广陵文，寒剑默听君子意，傲视人间笑红尘。</span> </li> 
                <li>
                  <ul class="updata_mes">
                      <li class="mess1">2016-12-12</li>
                      <li class="mess1">18：00</li>
                      <li class="mess2">回复</li>
                      <li class="mess3">举报</li>
                  </ul>
                </li>
              </ul>
					</div>
					<div class="text_userTow clear ">
              <a href="javascript:;"><img src="../img/smallHead.png"/ ></a>
              <ul class="mes_head">
                <li class="mes_head_user" >
                  <a href="javascript:;" class="user_a" title="">明珠求瑕</a>
                <li><span class="user_comment"  title="">回复<span class="aite_user">@纷纷扰扰扰红尘</span>思亘七险，点落九宫，神游八极，纵横十方。</span> </li> 
                <li>
                  <ul class="updata_mes">
                      <li class="mess1">2016-12-12</li>
                      <li class="mess1">18：00</li>
                      <li class="mess2">回复</li>
                      <li class="mess3">举报</li>
                  </ul>
                </li>
              </ul>
          </div>
          <ul class="Publish">
            <li class="user_head"><a href="javascript:;"><img src="../img/sss8.jpg"/></a></li>
            <li ><textarea></textarea></li>
            <li class="MessageBtn"><span>发表评论</span></li>
          </ul>
          <div class="hr"></div>
				</div>
				
				
				<div style="height: 300px;"></div>
				
					
			
			
			
			<div class="screen">
				<h3>作者相关</h3>
				<a href="javascript:;"><img :src="path.rootPath + userHead " class="head"></a>
				<ul class="author">
					<li><label>作者：</label>
						<a href="javascript:;" class="span span_author" title="{{authorName}}">{{authorName}}</a>
						<a @click="setAttention()" v-if="!attention" class="a_author" href="javascript:;">关注</a>
						<a @click="setAttention()" v-else class="a_author" href="javascript:;" >已关注</a>
					</li>
					<li><p class="span_autograph" title="{{autograph}}"><label style="color: black;">签名：</label>{{autograph}}</p></li>
				</ul>
				<style>
					
				</style>
				<div class="works">
					<h3 class="titile_tow">其他作品</h3>
					<div class="button">
						<button class="next" @click="nextWorksFn"><img src="../img/sss12.png"/></button>
						<button class="Previous" @click="previousWorksFn"><img src="../img/sss13.png"/></button>
					</div>
					<ul class="clear">
						<li :style="'left:' + $index * 84 + 'px;' + 'transform:translateX(' + 84 * zindex +'px);'"  v-for="obj in booktTitle">
							<a :href="path.TemprootPath + '/view/catalog.html?bookId=' + obj.bookId"> <img src="../img/z-imgBj.jpg" @load="szxj.loadImg(obj.bookCoverImage ? path.rootPath + obj.bookCoverImage: '', $event)"  /></a>
							<a class="works_a"  :href="path.TemprootPath + '/view/catalog.html?bookId=' + obj.bookId" class="span span_author" title="{{ obj.bookName }}">{{ obj.bookName }}</a>
						</li>
					</ul>
				</div>
				<!--<div class="list">
					<h3>好人榜</h3>
					<ul class="list_ul">
						<li>周</li>
						<li>月</li>
						<li class="active">总</li>
					</ul>
					<div class="ranking">
					  
						<div class="relative">
							<img src="../img/sss19.png" class="ranking_Img_line"/>
							<a href="javascript:;"><img src="../img/sss22.png" class="ranking_head"/></a>
							<ul>
								<li><a class="works_b" href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡">比企谷八幡比企谷八幡</a></li>
								<li class="name"></li>
								<li class="num"><img src="../img/sss15.png"/>好人币</li>
								<li class="num_money"><span class="money">{{ ARRAY[0].number }}</span></li>
							</ul>
						</div>
						
						<div class="ranking_name relative">
							<img src="../img/sss20.png" class="ranking_Img_line"/>
							<a href="javascript:;"><img src="../img/sss10.png" class="ranking_head"/></a>
							<ul>
								<li><a class="works_b" href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡">比企谷八幡</a></li>
								<li class="name"></li>
								<li class="num" style="color: #3781E7;"><img src="../img/sss16.png"/>好人币</li>
								<li class="num_money"><span class="money" style="color: #3781E7;">{{ ARRAY[1].number }}</span></li>
							</ul>
						</div>
						
						<div class="ranking_name relative">
							<img src="../img/sss21.png" class="ranking_Img_line"/>
							<a href="javascript:;"><img src="../img/sss14.png" class="ranking_head"/></a>
							<ul>
								<li><a class="works_b" href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡">比企谷八幡</a></li>
								<li class="name"></li>
								<li class="num"style="color: #08a690;"><img src="../img/sss17.png"/>好人币</li>
								<li class="num_money"><span class="money" style="color:#08a690;">{{ ARRAY[3].number }}</span></li>
							</ul>
						</div>
						
						<div class="rank">
							<ul v-for="obj in ARRAY" v-if="$index > 2 && $index >= 10">
								<li><a class="rank_a" href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡"><span class="rank_span">4</span><span class="rank_Title">封弊者</span></a></li>
								<li class="rank_num">340</li>
							</ul>
							<ul >
								<li><a class="rank_a" href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡"><span class="rank_span">5</span><span class="rank_Title">凤凰园凶真</span></a></li>
								<li class="rank_num">22</li>
							</ul>
							<ul >
								<li><a class="rank_a" href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡"><span class="rank_span">6</span><span class="rank_Title">封弊者</span></a></li>
								<li class="rank_num">12</li>
							</ul>
							<ul >
								<li><a class="rank_a" href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡"><span class="rank_span">7</span><span class="rank_Title">凤凰园凶真</span></a></li>
								<li class="rank_num">2</li>
							</ul>
							<ul >
								<li><a class="rank_a" href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡"><span class="rank_span">8</span><span class="rank_Title">凤凰园凶真</span></a></li>
								<li class="rank_num">2</li>
							</ul>
							<ul >
								<li><a class="rank_a" href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡"><span class="rank_span">9</span><span class="rank_Title">凤凰园凶真</span></a></li>
								<li class="rank_num">2</li>
							</ul>
							<ul >
								<li><a class="rank_a" href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡"><span class="rank_span">10</span><span class="rank_Title">凤凰园凶真</span></a></li>
								<li class="rank_num">2</li>
							</ul>
							<ul >
								<li><a class="rank_a" href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡"><span class="rank_span">11</span><span class="rank_Title">凤凰园凶真</span></a></li>
								<li class="rank_num">2</li>
							</ul>
						</div>
					</div>
					<div id="more"><a>查看更多</a></div>
				</div>-->
				<!--<div id="recommed">
					<h3>同类作品推荐</h3>
					<ul class="many">
						<li><a  href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡" style="color: #000000;">更多</a></li>
					</ul>
					<div class="recommed_works">
						<div>
							<a href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡"><img style="width: 91; height: 127px;" src="../img/z-imgBj.jpg" @load="szxj.loadImg(temp.bookCoverImage ? path.rootPath + temp.bookCoverImage: '', $event)"/></a>
							<span class="h4">夏日小作战</span>
							<ul>
								<li>字数：<span style="color:#7e7e7e">50万</span></li>
								<li>人气：<span style="color:#7e7e7e">155443</span></li>
								<li>作者：<span style="color:#7e7e7e" class="works_span" title="比企谷八幡比企谷八幡比企谷八幡">huhuf8</span></li>
							</ul>
						</div>
					</div>
					<div class="recommed_works">
						<div>
							<a href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡"><img style="width: 91; height: 127px;" src="../img/z-imgBj.jpg" @load="szxj.loadImg(temp.bookCoverImage ? path.rootPath + temp.bookCoverImage: '', $event)"/></a>
							<span class="h4">夏日小作战</span>
							<ul>
								<li>字数：<span style="color:#7e7e7e">50万</span></li>
								<li>人气：<span style="color:#7e7e7e">155443</span></li>
								<li>作者：<span style="color:#7e7e7e" class="works_span" title="比企谷八幡比企谷八幡比企谷八幡">huhuf8</span></li>
							</ul>
						</div>
					</div>
					<div class="recommed_Title">
						<ul>
							<li><a class="Title_a" href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡">幻城之巴拉啦老魔仙</a></li>
							<li><a class="Title_a" href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡">巴拉拉小魔仙奇遇记</a></li>
							<li><a class="Title_a" href="javascript:;" title="比企谷八幡比企谷八幡比企谷八幡">舞法舞天巴拉拉小魔仙</a></li>
						</ul>
					</div>
					</div>-->
			</div>
		</div>
		<!--<div 
			v-if="popup" 
			v-on:click="rewardFn"
			style="position: fixed;top: 50%;bottom: 0px;left: 0px;right: 0px; ">
			<div class="reward" >
				<div class="reward_cancel"><img src="../img/card-8.png"/ v-on:click="rewardShow"></div>
				<h4>这本书超赞，我要打赏他<span>(づ￣3￣)づ╭❤～</span></h4>
				<div class="reward_Num">
					<label>选择打赏的数量：</label>		
					<ul>	
						<li><a><img src="../img/card-1.png" />X10</a></li>
						<li class="reward_Choice"><a><img src="../img/card-2.png" /><img src="../img/card-7.png" class="Choice_img"/>X20</a></li>
						<li><a><img src="../img/card-3.png" />X30</a></li>
						<li><a><img src="../img/card-4.png" />X40</a></li>
						<li><a><img src="../img/card-5.png" />X50</a></li>
						<li><a><img src="../img/card-6.png" />X60</a></li>
					</ul>
					<p><textarea>自定义</textarea>X<img src="../img/card-1.png"/></p>
					<a class="reward_Pay btn">立刻打赏！</a>
				</div>	
				<a class="reward_Recharge">充值></a>
				<a class="reward_My">我的好人卡：1000</a>
			</div>
		</div>-->

	  <myfooter></myfooter>
	<script src="../js/apis/vueHttp.js"></script>
  <script src="../js/apis/conf.js"></script>
	<script type="text/javascript" src="../js/vue.min.js" ></script>
	<script type="text/javascript" src="../js/vue-resource.min.js" ></script>
 	<script type="text/javascript" src="../js/vue-router.min.js" ></script>
  <script type="text/javascript" src="../js/components/header.js" ></script>
  <script type="text/javascript" src="../js/components/footer.js" ></script>
  <script type="text/javascript" src="../js/require/headerOrfooter.js"></script>  
	</body>
	<script>
		var vuePractice = new Vue({
			el: '#mask',
			data: {
			  bodyFlag: false,
			  zindex: 0,
			  path: PathList,
			  szxj: SZXJ,
				popup:false,
				id: '',
				title: '',
				words:'',
				cursor:'',
				update:'',
				introduction:'',
				BookList: [],
				Booktype:[{typeName:''}],
				Collection:'',
				bookCopperCoins:'',
				authorName:'',
				autograph:'',
				booktTitle:[],
				bookCustom:[],
				collect: false,
				attention: false,
				userId: '',
				bookId: '',
				userHead: '', 
			},
			methods: {
			setAttention: function(){
			  var _data = {};
			  _data.receiveId = this.userId;
			  SZXJ.http('post', PathList.saveOrCancelAttention, _data, (response) => {
			    if (this.attention) {
			      this.attention = false;
			    } else {
			      this.attention = true;
			    }
        });
			},
			setCollect: function() {
			  var _data = {};
        _data.bookId = this.bookId;
        SZXJ.http('post', PathList.saveOrDeleteBookCollect, _data, (response) => {
          this.getValueFn()
        });
      },
				nextWorksFn:function() {
			    // <--
          this.zindex--;
          if (Math.abs(this.zindex) >= (this.booktTitle.length - 3)) {
            this.zindex = -(this.booktTitle.length - 3);
          }
			  },
			  previousWorksFn: function() {
			     this.zindex++;
          if (this.zindex >= 0) {
            this.zindex = 0;
          }
			  },
				getValueFn: function() {
					    var _data = {};
            	_data.bookId = this.id;
			        SZXJ.http('get', PathList.queryBookDirectory, _data, (response) => {
			        	// 取到数据渲染
			        	 this.bookCustom = [];
			        	 this.userHead = response.data.bookCustom.userEntity.userHead;
			        	 this.bookId = response.data.bookCustom.bookId;
			        	 this.userId = response.data.bookCustom.userEntity.userId;
			        	 this.collect= response.data.bookCustom.collect;
			        	 this.attention = response.data.bookCustom.userEntity.attention;
			        	 this.bookCustom.push(response.data.bookCustom);
			        	 this.title = response.data.bookCustom.bookName;
			        	 this.introduction =response.data.bookCustom.bookIntroduction;
			        	 this.words =response.data.bookCustom.bookWordCount;
			        	 this.update = response.data.bookCustom.bookUpdate;
			        	 this.cursor = response.data.bookCustom.bookHit;
			        	 this.BookList = response.data.bookCustom.volumeCustomList;
			        	 this.Booktype =response.data.bookCustom.bookTypeEntityList;
			        	 this.typeName =response.data.bookCustom.bookTypeName;
			        	 this.Collection =response.data.bookCustom.bookCollect;
			        	 this.bookCopperCoins =response.data.bookCustom.bookCopperCoins;
			        	 this.authorName =response.data.bookCustom.userEntity.userName;
			        	 this.autograph = response.data.bookCustom.userEntity.information;
			           console.log(response);
			        });
			        
			        SZXJ.http('get', PathList.findUserOtherBook, _data, (response) => {
			        	// 取到数据渲染
			        	this.booktTitle = response.data.userOtherBook;
			          console.log(response);
			        });
			       
				},
				rewardFn: function(){
					this.popup = true;
				},
				rewardShow: function(){
					this.popup = false;
				}
			},
			ready: function() {
			  this.bodyFlag = true;
			  var href = window.location.href;
        this.id = href.substring(href.lastIndexOf('?bookId=') + 8, href.length); 
	      var str = this.id.toString();
	      if (str.search(/[^0-9]/g) === -1) {
			    this.getValueFn();
        } else {
			    window.location.href = PathList.TemprootPath + '/index.html';
        }
			},
		});
		

	</script>
</html>
